!function(p){p.alerts={verticalOffset:-75,horizontalOffset:0,repositionOnResize:!0,overlayOpacity:.01,overlayColor:"#FFF",draggable:!0,okButton:"&nbsp;确定&nbsp;",cancelButton:"&nbsp;取消&nbsp;",dialogClass:null,alert:function(e,o,t){null==o&&(o="Alert"),p.alerts._show(o,e,null,"alert",function(p){t&&t(p)})},confirm:function(e,o,t){null==o&&(o="Confirm"),p.alerts._show(o,e,null,"confirm",function(p){t&&t(p)})},prompt:function(e,o,t,i){null==t&&(t="Prompt"),p.alerts._show(t,e,o,"prompt",function(p){i&&i(p)})},_show:function(e,o,t,i,n){p.alerts._hide(),p.alerts._overlay("show"),p("BODY").append('<div id="popup_container"><div id="popup_content"><div id="popup_message"></div><h1 id="popup_title"></h1></div></div>'),p.alerts.dialogClass&&p("#popup_container").addClass(p.alerts.dialogClass);var a="fixed";switch(p("#popup_container").css({position:a,zIndex:99999,padding:0,margin:0,marginTop:-p("#popup_container").height()/2}),p("#popup_title").text(e),p("#popup_content").addClass(i),p("#popup_message").text(o),p("#popup_message").html(p("#popup_message").text().replace(/\n/g,"<br />")),p("#popup_container").css({minWidth:"6rem",maxWidth:"6rem"}),p.alerts._reposition(),p.alerts._maintainPosition(!1),i){case"alert":p("#popup_title").after('<div id="popup_panel"><span id="popup_ok">'+p.alerts.okButton+"</span></div>"),p("#popup_ok").click(function(e){var e=e||window.event;e.preventDefault(),p.alerts._hide(),n(!0)}),p("#popup_ok").focus().keypress(function(e){(13==e.keyCode||27==e.keyCode)&&p("#popup_ok").trigger("click")});break;case"confirm":p("#popup_title").after('<div id="popup_panel"><span id="popup_ok">'+p.alerts.okButton+'</span> <span id="popup_cancel">'+p.alerts.cancelButton+"</span></div>"),p("#popup_ok").click(function(e){var e=e||window.event;e.preventDefault(),p.alerts._hide(),n&&n(!0)}),p("#popup_cancel").click(function(e){var e=e||window.event;e.preventDefault(),p.alerts._hide(),n&&n(!1)}),p("#popup_ok").focus(),p("#popup_ok, #popup_cancel").keypress(function(e){13==e.keyCode&&p("#popup_ok").trigger("click"),27==e.keyCode&&p("#popup_cancel").trigger("click")});break;case"prompt":p("#popup_message").append('<br /><input type="text" size="30" id="popup_prompt" />').after('<div id="popup_panel"><input type="button" value="'+p.alerts.okButton+'" id="popup_ok" /> <input type="button" value="'+p.alerts.cancelButton+'" id="popup_cancel" /></div>'),p("#popup_prompt").width(p("#popup_message").width()),p("#popup_ok").click(function(){var e=p("#popup_prompt").val();p.alerts._hide(),n&&n(e)}),p("#popup_cancel").click(function(){p.alerts._hide(),n&&n(null)}),p("#popup_prompt, #popup_ok, #popup_cancel").keypress(function(e){13==e.keyCode&&p("#popup_ok").trigger("click"),27==e.keyCode&&p("#popup_cancel").trigger("click")}),t&&p("#popup_prompt").val(t),p("#popup_prompt").focus().select()}if(p.alerts.draggable)try{p("#popup_container").draggable({handle:p("#popup_title")}),p("#popup_title").css({cursor:"move"})}catch(r){}},_hide:function(){p("#popup_container").remove(),p.alerts._overlay("hide"),p.alerts._maintainPosition(!1)},_overlay:function(e){switch(e){case"show":p.alerts._overlay("hide"),p("BODY").append('<div id="popup_overlay"></div>'),p("#popup_overlay").css({position:"absolute",zIndex:99998,top:"0px",left:"0px",width:"100%",height:p(document).height(),background:p.alerts.overlayColor,opacity:p.alerts.overlayOpacity});break;case"hide":p("#popup_overlay").remove()}},_reposition:function(){var e=p(window).height()/2-p("#popup_container").outerHeight()/2+p.alerts.verticalOffset,o=p(window).width()/2-p("#popup_container").outerWidth()/2+p.alerts.horizontalOffset;0>e&&(e=0),0>o&&(o=0),p("#popup_container").css({top:"50%",left:o+"px"}),p("#popup_overlay").height(p(document).height())},_maintainPosition:function(e){if(p.alerts.repositionOnResize)switch(e){case!0:p(window).bind("resize",function(){p.alerts._reposition()});break;case!1:p(window).unbind("resize")}}},jAlert=function(e,o,t){p.alerts.alert(e,o,t)},jConfirm=function(e,o,t){p.alerts.confirm(e,o,t)},jPrompt=function(e,o,t,i){p.alerts.prompt(e,o,t,i)}}(jQuery);