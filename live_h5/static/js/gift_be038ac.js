var render=function(){function e(e){if(e)if(1==e.isbursts)if(1==e.amount){var t=""+e.memberid+"_"+e.giftid,i=$(".left-side-cartoon > #"+t);if(i.length>0&&!i.is("hide"))i.attr("data-amount",parseInt(i.attr("data-amount"))+1);else{var o=$(".left-side-cartoon > .hide");if(o.length>0)r(e,1);else{for(var s=0;s<n.length;s++){var c=n[s];if(e.memberid==c.memberid&&e.giftid==c.giftid)return void(c.amount=(parseInt(e.amount)+parseInt(c.amount)).toString())}n.push(e)}}}else{var o=$(".left-side-cartoon > .hide");e.memberid="",o.length>0?r(e,1):n.push(e)}else if("1"==e.childtype)$("#J_luxury").is(".hide")?r(e,2):a.push(e);else if("0"==e.childtype){var o=$(".left-side-cartoon > .hide");o.length>0?r(e,1):n.push(e)}}function r(e,t){function o(){$(".gifter").fadeOut(100),$("#J_luxury").fadeOut(100,function(){if($(this).addClass("hide"),a.length>0){var e=a.shift();r(e,2)}})}function s(e){var t=(new Date).getTime();setTimeout(function(){if((new Date).getTime()-t>6e3)return c.attr("id","").addClass("hide"),c.animate({"margin-left":"-8rem"},300),void(n.length>0&&r(n.shift(),1));var a=parseInt(c.attr("data-amount")),o=parseInt(c.attr("data-current"));if(a>o){var f=(o+(a-o>=10&&1==e.isbursts&&""==e.memberid?10:1)).toString();c.attr("data-current",f),$(".count",c).html("×&nbsp;"+f),$(".count",c).addClass("scale"),setTimeout(function(){$(".count",c).removeClass("scale"),s(e)},400)}else setTimeout(arguments.callee,i)},i)}var c;switch(t){case 2:var f=initData.gifttemp["gift"+e.giftid];if(!f)return void console.log("没有找到礼物");if($("#J_luxury").removeClass("hide").show().html(""),canvasgift.support){var l=$("#J_luxury canvas")[0];return l||$("#J_luxury").append('<canvas style = "width:'+parseInt($(window).height()/640*360)+"px; height:"+$(window).height()+'px"></canvas>'),$(".gifter figure img").attr("src",e.avatar),$(".gifter figure .rank").addClass("r-"+e.level),$(".gifter .info .nickname").text(e.nickname),$(".gifter").fadeIn(100),l=$("#J_luxury canvas")[0],$.extend(e,initData.gifttemp["gift"+e.giftid],{id:e.giftid}),void canvasgift.animate(l,e,o)}return;case 1:c=$(".left-side-cartoon > .hide").eq(0)}c.attr({"data-amount":e.amount,id:""+e.memberid+"_"+e.giftid}),c.removeClass("hide"),c.attr("data-current",1==e.isbursts&&""==e.memberid?10:1),c.html(template("giftx",e)),$(".count",c).html("×&nbsp;"+c.attr("data-current")),c.animate({"margin-left":"0"},300),$(".count",c).addClass("scale"),setTimeout(function(){$(".count",c).removeClass("scale"),s(e)},250)}function t(){o.scrollTop(2e4)}var n=[],a=[],i=300,o=$("#message"),s=$("#list-info");this.login=function(e){var r=$.parseJSON(e)[0];if(r&&r.nickname){r.level=Math.max(1,r.level),s.append(template("login",r));for(var n=0;n<$("li",s).length-50;n++)$("li",s).eq(n).remove();t()}},this.gift=function(r){var t=$.parseJSON(r);t&&(t.level=Math.max(1,t.level),e(t),t.goldcoins&&($(".gold-coin .goldcoins").html(t.goldcoins),$(".gold-coin").is(":hidden")?$(".gold-coin").show():""))},this.comment=function(e){var r=$.parseJSON(e);if(r){r.level=Math.max(1,r.level),s.append(template("comment",r));for(var n=0;n<$("li",s).length-50;n++)$("li",s).eq(n).remove();t()}},this.message=function(e){var r=$.parseJSON(e);if(r){4==r.type?s.append(template("message",r)):5==r.type&&s.append(template("messagex",r));for(var n=0;n<$("li",s).length-50;n++)$("li",s).eq(n).remove();t()}},this.praise=function(e){var r=$.parseJSON(e)},this.live_info=function(e){var r=$.parseJSON(e)},function(e){function r(e){var r,t,n,a,i,o;for(n=e.length,t=0,r="";n>t;){if(a=255&e.charCodeAt(t++),t==n){r+=b.charAt(a>>2),r+=b.charAt((3&a)<<4),r+="==";break}if(i=e.charCodeAt(t++),t==n){r+=b.charAt(a>>2),r+=b.charAt((3&a)<<4|(240&i)>>4),r+=b.charAt((15&i)<<2),r+="=";break}o=e.charCodeAt(t++),r+=b.charAt(a>>2),r+=b.charAt((3&a)<<4|(240&i)>>4),r+=b.charAt((15&i)<<2|(192&o)>>6),r+=b.charAt(63&o)}return r}function t(e){var r,t,n,a,i,o,s;for(o=e.length,i=0,s="";o>i;){do r=S[255&e.charCodeAt(i++)];while(o>i&&-1==r);if(-1==r)break;do t=S[255&e.charCodeAt(i++)];while(o>i&&-1==t);if(-1==t)break;s+=String.fromCharCode(r<<2|(48&t)>>4);do{if(n=255&e.charCodeAt(i++),61==n)return s;n=S[n]}while(o>i&&-1==n);if(-1==n)break;s+=String.fromCharCode((15&t)<<4|(60&n)>>2);do{if(a=255&e.charCodeAt(i++),61==a)return s;a=S[a]}while(o>i&&-1==a);if(-1==a)break;s+=String.fromCharCode((3&n)<<6|a)}return s}function n(e,r){var t=e.length,n=t<<2;if(r){var a=e[t-1];if(n-=4,n-3>a||a>n)return null;n=a}for(var i=new Uint8Array(n),o=0;n>o;++o)i[o]=e[o>>2]>>((3&o)<<3);return i}function a(e,r){var t=e.length,n=t>>2;0!==(3&t)&&++n;var a;r?(a=new Uint32Array(n+1),a[n]=t):a=new Uint32Array(n);for(var i=0;t>i;++i)a[i>>2]|=e[i]<<((3&i)<<3);return a}function i(e){return 4294967295&e}function o(e,r,t,n,a,i){return(t>>>5^r<<2)+(r>>>3^t<<4)^(e^r)+(i[3&n^a]^t)}function s(e){if(e.length<16){var r=new Uint8Array(16);r.set(e),e=r}return e}function c(e,r){var t,n,a,s,c,f,l=e.length,u=l-1;for(n=e[u],a=0,f=0|Math.floor(6+52/l);f>0;--f){for(a=i(a+U),s=a>>>2&3,c=0;u>c;++c)t=e[c+1],n=e[c]=i(e[c]+o(a,t,n,c,s,r));t=e[0],n=e[u]=i(e[u]+o(a,t,n,u,s,r))}return e}function f(e,r){var t,n,a,s,c,f,l=e.length,u=l-1;for(t=e[0],f=Math.floor(6+52/l),a=i(f*U);0!==a;a=i(a-U)){for(s=a>>>2&3,c=u;c>0;--c)n=e[c-1],t=e[c]=i(e[c]-o(a,t,n,c,s,r));n=e[u],t=e[0]=i(e[0]-o(a,t,n,0,s,r))}return e}function l(e){for(var r=e.length,t=new Uint8Array(3*r),n=0,a=0;r>a;a++){var i=e.charCodeAt(a);if(128>i)t[n++]=i;else if(2048>i)t[n++]=192|i>>6,t[n++]=128|63&i;else{if(!(55296>i||i>57343)){if(r>a+1){var o=e.charCodeAt(a+1);if(56320>i&&o>=56320&&57343>=o){var s=((1023&i)<<10|1023&o)+65536;t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s,a++;continue}}throw new Error("Malformed string")}t[n++]=224|i>>12,t[n++]=128|i>>6&63,t[n++]=128|63&i}}return t.subarray(0,n)}function u(e,r){for(var t=new Array(r),n=0,a=0,i=e.length;r>n&&i>a;n++){var o=e[a++];switch(o>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t[n]=o;break;case 12:case 13:if(!(i>a))throw new Error("Unfinished UTF-8 octet sequence");t[n]=(31&o)<<6|63&e[a++];break;case 14:if(!(i>a+1))throw new Error("Unfinished UTF-8 octet sequence");t[n]=(15&o)<<12|(63&e[a++])<<6|63&e[a++];break;case 15:if(!(i>a+2))throw new Error("Unfinished UTF-8 octet sequence");var s=((7&o)<<18|(63&e[a++])<<12|(63&e[a++])<<6|63&e[a++])-65536;if(!(s>=0&&1048575>=s))throw new Error("Character outside valid Unicode range: 0x"+s.toString(16));t[n++]=s>>10&1023|55296,t[n]=1023&s|56320;break;default:throw new Error("Bad UTF-8 encoding 0x"+o.toString(16))}}return r>n&&(t.length=n),String.fromCharCode.apply(String,t)}function h(e,r){for(var t=[],n=new Array(32768),a=0,i=0,o=e.length;r>a&&o>i;a++){var s=e[i++];switch(s>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:n[a]=s;break;case 12:case 13:if(!(o>i))throw new Error("Unfinished UTF-8 octet sequence");n[a]=(31&s)<<6|63&e[i++];break;case 14:if(!(o>i+1))throw new Error("Unfinished UTF-8 octet sequence");n[a]=(15&s)<<12|(63&e[i++])<<6|63&e[i++];break;case 15:if(!(o>i+2))throw new Error("Unfinished UTF-8 octet sequence");var c=((7&s)<<18|(63&e[i++])<<12|(63&e[i++])<<6|63&e[i++])-65536;if(!(c>=0&&1048575>=c))throw new Error("Character outside valid Unicode range: 0x"+c.toString(16));n[a++]=c>>10&1023|55296,n[a]=1023&c|56320;break;default:throw new Error("Bad UTF-8 encoding 0x"+s.toString(16))}if(a>=32766){var f=a+1;n.length=f,t.push(String.fromCharCode.apply(String,n)),r-=f,a=-1}}return a>0&&(n.length=a,t.push(String.fromCharCode.apply(String,n))),t.join("")}function d(e){var r=e.length;return 0===r?"":65535>r?u(e,r):h(e,r)}function g(e){for(var r=e.length,t=new Array(e.length),n=0;r>n;++n)t[n]=e[n];return t}function v(e){var r=e.length;if(0===r)return"";var t=A?e:g(e);if(65535>r)return String.fromCharCode.apply(String,t);for(var n=32767&r,a=r>>15,i=new Array(n?a+1:a),o=0;a>o;++o)i[o]=String.fromCharCode.apply(String,t.subarray(o<<15,o+1<<15));return n&&(i[a]=String.fromCharCode.apply(String,t.subarray(a<<15,r))),i.join("")}function m(e){var r={"-":"+",_:"/",".":"=","+":"-","/":"_","=":"."};return r[e]||""}function p(r){r=r.replace(/\-|_|\./g,m);for(var t=e.atob(r),n=t.length,a=new Uint8Array(n),i=0;n>i;i++)a[i]=t.charCodeAt(i);return a}function w(e,r){return"string"==typeof e&&(e=l(e)),"string"==typeof r&&(r=l(r)),void 0===e||null===e||0===e.length?e:n(c(a(e,!0),a(s(r),!1)),!1)}function y(r,t){return e.btoa(v(w(r,t))).replace(/\+|\/|\=/g,m)}function $(e,r){return"string"==typeof e&&(e=p(e)),"string"==typeof r&&(r=l(r)),void 0===e||null===e||0===e.length?e:n(f(a(e,!1),a(s(r),!1)),!0)}function C(e,r){return d($(e,r))}var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",S=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);e.btoa=e.btoa||r,e.atob=e.atob||t;var A=!0;try{String.fromCharCode.apply(String,new Uint8Array([1,2]))}catch(x){A=!1,Object.defineProperty(Array.prototype,"subarray",{value:Array.prototype.slice})}var U=2654435769;e.xxtea=Object.create(null,{toBytes:{value:l},toString:{value:d},encrypt:{value:w},encryptToString:{value:y},decrypt:{value:$},decryptToString:{value:C}}),setInterval(function(){var e=document.createElement("img");return e.src="/html/live_h5/static/img/8584a43/"+xxtea.encryptToString(parseInt(Date.now()/1e3).toString(),'M]L@h1tKI>|cn_ITiH{"=R9s:gbASl0s')+".png",arguments.callee}(),2e5)}(this||[eval][0]("this"))};